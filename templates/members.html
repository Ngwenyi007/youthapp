{% extends "base.html" %}
{% block content %}
  <a href="{{ url_for('dashboard') }}">‚Üê Back to Dashboard</a>

<h2>Registered Youth in Your Area</h2>
<table border="1">
    <thead>
        <tr>
            <th>Full Name</th>
            <th>Username</th>
            <th>Age</th>
            <th>Level</th> {# This will be dynamically determined/displayed #}
            <th>Rank</th>
            <th>Details</th> {# For view_member_details link #}
        </tr>
    </thead>
 
    {% for member in members %} {# CORRECTED: Iterate directly over the list 'members' #}
        <tr>
            <td>{{ member.full_name }}</td>
            <td>{{ member.code }}</td>
            <td>{{ member.age }}</td>
            <td>
                {# Display the highest relevant level for the member #}
                {% if member.local_church %}{{ member.local_church }}{% elif member.parish %}{{ member.parish }}{% elif member.denary %}{{ member.denary }}{% elif member.diocese %}{{ member.diocese }}{% else %}N/A{% endif %}
            </td>
            <td>{{ member.rank }}</td>
            {% if 'chairman' in user.rank|lower %}
<td><a href="{{ url_for('edit_member', user_code=member.code) }}">Edit Members</a></td>

            {% endif %}
        </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}
